<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas id="canvas" width="800" height="600" style="border:1px solid red;"></canvas>
</body>
<script>
    //1、绘制坐标轴线



    function LineChart(opt){

    	
    	for(var key in opt) {
    		this[key] = opt[key];
    	}
//      this.canvas=opt.canvas;
//      this.data=opt.data;
//      this.yLength=opt.yLength;
//      this.xLength=opt.xLength;
//      this.zeroX=opt.zeroX;
//      this.zeroY=opt.zeroY;
//      this.arrowBottom=opt.arrowBottom;
//      this.arrowHeight=opt.arrowHeight;
//
//
        this.ctx=this.canvas.getContext("2d");
//
//
        this.yTopX=this.zeroX;
        this.yTopY=this.zeroY-this.yLength;

        this.xTopX=this.zeroX+this.xLength;
        this.xTopY=this.zeroY;

        this.init();//初始化       //this.init:undefined
    }

    LineChart.prototype={
        //约定俗成：
        constructor:LineChart,

        init:function(){
            this.drawAxis();
            this.drawArrows();
            this.drawPoints();
            this.drawLine();
        },

        //绘制坐标轴
        drawAxis:function(){
            var ctx=this.ctx;

            ctx.moveTo(this.yTopX,this.yTopY);
            ctx.lineTo(this.zeroX,this.zeroY);
            ctx.lineTo(this.xTopX,this.xTopY);
        },

        //绘制2个坐标轴箭头：
        drawArrows:function(){
            var ctx=this.ctx;

            ctx.moveTo(this.yTopX-this.arrowBottom/2,this.yTopY+this.arrowHeight);
            ctx.lineTo(this.yTopX,this.yTopY);
            ctx.lineTo(this.yTopX+this.arrowBottom/2,this.yTopY+this.arrowHeight);

            ctx.moveTo(this.xTopX-this.arrowHeight,this.xTopY-this.arrowBottom/2);
            ctx.lineTo(this.xTopX,this.xTopY);
            ctx.lineTo(this.xTopX-this.arrowHeight,this.xTopY+this.arrowBottom/2);

            ctx.stroke();
        },

        //绘制数据点
        drawPoints:function(){
            var ctx=this.ctx;

            ctx.beginPath();

            var self=this;

            this.data2=this.data.map(function(v){
                //v:{x:xxx,y:xxx}

                //计算出该点位于canvas上的坐标
                //  -->方式：根据判断该点的坐标跟zeroX/zeroY的距离来计算出该点的实际坐标

                var canvasX=self.zeroX+v.x;
                var canvasY=self.zeroY-v.y;

                //绘制边长为6px的正方形
                ctx.strokeRect(canvasX-3,canvasY-3,6,6);

                return {x:canvasX,y:canvasY};
            });
        },

        //连线
        drawLine:function(){
            var ctx=this.ctx;

            this.data2.forEach(function(v,i){
                //v:{x:...,y:...}

//                if(i==0){
//                    ctx.moveTo(v.x,v.y);
//                }else{
//                    ctx.lineTo(v.x,v.y);
//                }

                ctx[i==0?"moveTo":"lineTo"](v.x,v.y);


            });
            ctx.stroke();
        }


    };

    //配置/选项
    var opt={
        canvas:document.getElementById("canvas"),
        data:[
            {x:50,y:50},
            {x:100,y:100},
            {x:150,y:300},
            {x:200,y:50},
            {x:250,y:450}
        ],
        yLength:400,
        xLength:500,
        zeroX:50,
        zeroY:500,
        arrowBottom:10,
        arrowHeight:20
    }

    var lineChart=new LineChart(opt);











</script>
</html>