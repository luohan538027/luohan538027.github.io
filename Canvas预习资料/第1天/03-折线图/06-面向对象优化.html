<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>$Title$</title>
</head>
<body>
<canvas id="canvas" width="800" height="600" style="border:1px solid red"></canvas>
</body>
<script>
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    function LineChart(data, opt) {
        this.data = data;

        //将opt中的属性保存在this中-->混入继承
        for (var key in opt) {
            this[key] = opt[key];
        }

        //计算原点坐标
        this.zeroX = this.yTopX;
        this.zeroY = this.yTopY + this.yLength;
        //计算x轴顶点坐标
        this.xTopX = this.zeroX + this.xLength;
        this.xTopY = this.zeroY;


        this.init();

    }

    //折线图的初始化操作
    LineChart.prototype.init=function(){
        this.drawAxis();
        this.drawPoints();
        this.line();
    }

    //绘制坐标轴
    LineChart.prototype.drawAxis = function () {
        //y轴顶点箭头
        ctx.moveTo(this.yTopX + this.arrowBottom / 2, this.yTopY + this.arrowHeight);
        ctx.lineTo(this.yTopX, this.yTopY);
        ctx.lineTo(this.yTopX - this.arrowBottom / 2, this.yTopY + this.arrowHeight);

        //x轴顶点箭头
        ctx.moveTo(this.xTopX - this.arrowHeight, this.xTopY - this.arrowBottom / 2);
        ctx.lineTo(this.xTopX, this.xTopY);
        ctx.lineTo(this.xTopX - this.arrowHeight, this.xTopY + this.arrowBottom / 2);

        //坐标线
        ctx.moveTo(this.yTopX, this.yTopY);
        ctx.lineTo(this.zeroX, this.zeroY);
        ctx.lineTo(this.xTopX, this.xTopY);

        ctx.stroke();
    };

    //绘制坐标点
    LineChart.prototype.drawPoints = function () {
        //2、绘制坐标轴上的点
        //2.1、计算每一个点位于canvas中的坐标
        this.data.forEach(function (v, i) {
            //v={x:xxx,y:xxx}


            v.cvsX = this.zeroX + v.x;
            v.cvsY = this.zeroY - v.y
        }, this);

        //2.2、绘制点
        this.data.forEach(function (v, i) {
            //v={x:xxx,y:xxx,cvsX:xxx,cvsY:xxx}


            //假定小矩形边长为6
            var width = 6;

            ctx.fillRect(v.cvsX - width / 2, v.cvsY - width / 2, width, width);


        }, this);
    };

    LineChart.prototype.line = function () {
        //3、连线
        ctx.moveTo(this.zeroX, this.zeroY);
        this.data.forEach(function (v, i) {
            ctx.lineTo(v.cvsX, v.cvsY);
        });
        ctx.stroke();
    }

    var line = new LineChart([
        {x: 50, y: 50},
        {x: 100, y: 250},
        {x: 150, y: 300},
        {x: 200, y: 150},
        {x: 300, y: 250}
    ], {
        yTopX: 50,
        yTopY: 50,
        yLength: 400,
        xLength: 600,
        arrowBottom: 20,
        arrowHeight: 30
    });

    //    //1、坐标轴
    //
    //    var data = [
    //        {x: 50, y: 50},
    //        {x: 100, y: 250},
    //        {x: 150, y: 300},
    //        {x: 200, y: 150},
    //        {x: 300, y: 250}
    //    ];
    //
    //
    //    var yTopX = 50, yTopY = 50,
    //            yLength = 400, xLength = 600,
    //            arrowBottom = 20, arrowHeight = 30;
    //
    //    //计算原点坐标
    //    var zeroX = yTopX, zeroY = yTopY + yLength;
    //    //计算x轴顶点坐标
    //    var xTopX = zeroX + xLength, xTopY = zeroY;
    //
    //    //y轴顶点箭头
    //    ctx.moveTo(yTopX + arrowBottom / 2, yTopY + arrowHeight);
    //    ctx.lineTo(yTopX, yTopY);
    //    ctx.lineTo(yTopX - arrowBottom / 2, yTopY + arrowHeight);
    //
    //    //x轴顶点箭头
    //    ctx.moveTo(xTopX - arrowHeight, xTopY - arrowBottom / 2);
    //    ctx.lineTo(xTopX, xTopY);
    //    ctx.lineTo(xTopX - arrowHeight, xTopY + arrowBottom / 2);
    //
    //    //坐标线
    //    ctx.moveTo(yTopX, yTopY);
    //    ctx.lineTo(zeroX, zeroY);
    //    ctx.lineTo(xTopX, xTopY);
    //
    //    ctx.stroke();
    //
    //    //2、绘制坐标轴上的点
    //    //2.1、计算每一个点位于canvas中的坐标
    //    data.forEach(function (v, i) {
    //        //v={x:xxx,y:xxx}
    //
    //        v.cvsX = zeroX + v.x;
    //        v.cvsY = zeroY - v.y
    //    });
    //
    //    //2.2、绘制点
    //    data.forEach(function (v, i) {
    //        //v={x:xxx,y:xxx,cvsX:xxx,cvsY:xxx}
    //
    //
    //        //假定小矩形边长为6
    //        var width = 6;
    //
    //        ctx.fillRect(v.cvsX - width / 2, v.cvsY - width / 2, width, width);
    //
    //
    //    });
    //
    //
    //    //3、连线
    //    ctx.moveTo(zeroX, zeroY);
    //    data.forEach(function (v, i) {
    //        ctx.lineTo(v.cvsX, v.cvsY);
    //    });
    //    ctx.stroke();
</script>
</html>