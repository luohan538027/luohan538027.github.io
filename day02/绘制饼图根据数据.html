<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<canvas id="canvas" width="800" height="600" style="border: 1px solid red;"></canvas>

	</body>

</html>

<script type="text/javascript">
	var canvas = document.querySelector('#canvas');
	var ctx = canvas.getContext('2d');

	var colors = (function() {
		return("aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue," +
			"blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk," +
			"crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta," +
			"darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray," +
			"darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick," +
			"floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey," +
			"honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon," +
			"lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink," +
			"lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow," +
			"lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple," +
			"mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue," +
			"mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid," +
			"palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue," +
			"purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna," +
			"silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,transparent," +
			"tomato,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen").split(',');
	})();

	var x = 200,
		y = 200,
		radius = 150;
	var data = [10, 15, 7, 3, 2];
	var sum = 0;

	//求出数据之和
	data.forEach(function(v) {
		sum += v;
	});

	var step = 0;
	var begin = -Math.PI / 2;
	
	//开始绘制圆饼 
	var data2 = data.map(function(v, i) {
		
		var rate = v/sum;
		step = 2 * Math.PI * rate;
		var end = begin + step;
		
		ctx.beginPath();
		ctx.moveTo(x,y);
		ctx.arc(x,y,radius,begin,end);
		ctx.fillStyle = colors[i + 15];
		ctx.fill();
		begin = end;
		
		return {
			data:v,
			rate:rate
		}
	})
	
	console.log(data2);
	var data3 = data2.forEach(function(v,i){
		var star = - Math.PI / 2 +
	})
</script>